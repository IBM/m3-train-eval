#!/bin/bash

FROM python:3.11
# ARG ARTIFACTORY_USERNAME
# ARG ARTIFACTORY_API_KEY
# ARG PIP_EXTRA_INDEX_URL

# ENV PYTHONPATH=$PYTHONPATH:.
# ENV ARTIFACTORY_USERNAME=$ARTIFACTORY_USERNAME
# ENV ARTIFACTORY_API_KEY=$ARTIFACTORY_API_KEY
# ENV PIP_EXTRA_INDEX_URL=$PIP_EXTRA_INDEX_URL

WORKDIR /invocable-api-hub

COPY requirements.txt .

RUN pip install -r requirements.txt
COPY . .
ENV PYTHONPATH "${PYTHONPATH}:."
EXPOSE 8000

ENTRYPOINT ["uvicorn", "server:app", "--reload"]
